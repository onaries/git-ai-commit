# Repository Guidelines

## Project Structure & Module Organization
- `src/index.ts` bootstraps the CLI and wires subcommands.
- `src/commands/` houses command implementations; `src/prompts/` stores prompt templates.
- `src/__tests__/` contains Jest suites that mirror command modules.
- `dist/` holds compiled JavaScript, and `coverage/` stores Jest reports generated by CI or local runs.
- Configuration is centralized in `ConfigService`, which reads env vars such as `OPENAI_API_KEY` (and supports `AI_API_KEY`).

## Build, Test, and Development Commands
- `npm run build` compiles TypeScript into `dist/`.
- `npm run dev` runs the CLI via `ts-node` for rapid iteration.
- `npm run test` executes all Jest suites; add `:file` to target a single spec (e.g., `npm run test:file src/__tests__/commit.test.ts`).
- `npm run lint` applies the ESLint ruleset; `npm run typecheck` enforces strict typing without emitting files.
- `npm run test:coverage` produces coverage summaries under `coverage/`.

## Coding Style & Naming Conventions
- Stick to strict TypeScript with explicit return types; avoid `any`.
- Favor async/await for I/O, wrap fallible calls in `try/catch`, and surface descriptive errors.
- Indent with two spaces and group imports (stdlib, third-party, internal).
- Place new CLI features in `src/commands/` and associated prompt text in `src/prompts/`.
- Run `npm run lint` before pushing to guarantee ESLint compliance.

## Testing Guidelines
- Author Jest specs in `src/__tests__/` using the `*.test.ts` suffix.
- Organize tests with `describe` blocks per module and mock external services.
- Maintain at least 80% branch coverage; extend fixtures when adding command paths.
- Use `npm run test:watch` for iterative development and `npm run test:file` for focused checks.

## Commit & Pull Request Guidelines
- Write imperative, concise commit subjects (e.g., `Add staged diff validation`).
- Add a body when modifying configuration or integration points to capture reasoning.
- In PRs, link issues, summarize user impact, and attach CLI output or screenshots when UX changes.
- Verify `npm run lint`, `npm run test`, and `npm run build` locally before requesting review.

## Security & Configuration Tips
- Keep API keys (`OPENAI_API_KEY`, `AI_API_KEY`) in a local `.env`; never commit secrets.
- Route configuration reads and validation through `ConfigService` to ensure consistent defaults.
